{"version":3,"sources":["component/project.jsx"],"names":["ProjectCard","title","this","props","index","match","name_mm","slice","name","en_title","length","console","log","style","marginBottom","className","time","error","React","Component","Project","state","project_list","load","error_msg","time_test","genPromise","then","data","code","forEach","el","project_time","project_name","Date","getFullYear","sort","a","b","setState","message","map","key","abstract","tag","link","ContentLoader","width","height","text"],"mappings":"mPAkCMA,E,iLAEE,IACI,IAAMC,EAAQC,KAAKC,MAAMF,MAEnBG,EADKF,KAAKC,MAAMF,MAAMI,MAAM,WAClB,MACVC,EAAQL,EAAMM,MAAMH,GAAOC,MAAM,sBACnCG,EAAKF,EAAQ,GACbG,EAASR,EAAMM,MAAMH,EAAME,EAAO,MAAUE,EAAKE,QAKrD,OADJC,QAAQC,IAAIV,KAAKC,MAAMF,OAEf,4BACI,6BACI,uBAAGY,MAAO,CAACC,aAAa,IACxB,0BAAMC,UAAU,oCACXd,EAAMM,MAAM,EAAGH,IAChB,8BAAOK,IAIX,2BACKD,EAAK,0BAAMO,UAAU,QAAQb,KAAKC,MAAMa,SAK5D,MAAMC,GACH,OACI,4BACI,6BACKf,KAAKC,MAAMF,a,GAjCViB,IAAMC,WAkDXC,E,YACjB,WAAYjB,GAAQ,IAAD,8BACf,4CAAMA,KACDkB,MAAQ,CACTC,aAAc,GACdC,MAAM,EACNN,OAAO,EACPO,UAAW,SANA,E,iFASC,IAAD,OACTC,EAAW,8IACjBC,YAAW,MAAM,kDAAkDC,MAC/D,SAACC,GACkB,IAAZA,EAAKC,MACJD,EAAKA,KAAKE,SAAQ,SAACC,GACf,IAAIC,EAAaD,EAAGE,aAAa5B,MAAMoB,GACvCM,EAAGf,KAAOgB,EAAa,IAAMA,EAAa,KAAM,IAAIE,MAAOC,cAC3DJ,EAAGE,aAAeF,EAAGE,aAAa1B,MAAM,EAAGyB,EAAY,OACvDD,EAAGC,aAAeA,EAAa,MAEnCJ,EAAKA,KAAKQ,MAAK,SAACC,EAAGC,GACf,OAAID,EAAErB,KAEGsB,EAAEtB,KAEJsB,EAAEtB,KAAOqB,EAAErB,MADN,EAFD,KAMf,EAAKuB,SAAS,CACVjB,aAAcM,EAAKA,KACnBL,MAAM,KAGV,EAAKgB,SAAS,CACVtB,OAAO,OAGhB,SAACA,GACAN,QAAQC,IAAIK,GACZ,EAAKsB,SAAS,CACVtB,OAAO,EACPO,UAAWP,EAAMuB,e,+BAS7B,IAAMlB,EAAepB,KAAKmB,MAAMC,aAAamB,KAAI,SAACV,EAAI3B,GAAL,OAC7C,kBAACJ,EAAD,CAAa0C,IAAKtC,EACdH,MAAO8B,EAAGE,aACVjB,KAAMe,EAAGC,aACTW,SAAUZ,EAAGY,SACbC,IAAKb,EAAGa,IACRC,KAAMd,EAAGc,UAEXC,EAAgB,kBACjB,yBAAK/B,UAAU,sBACZ,yBAAKA,UAAU,wCACXF,MAAO,CAAEkC,MAAO,MAAOC,OAAQ,UAC3B,yBAAKjC,UAAU,iBAEnB,yBAAKA,UAAU,wCACfF,MAAO,CAAEkC,MAAO,MAAOC,OAAQ,UAC3B,yBAAKjC,UAAU,iBAEnB,yBAAKA,UAAU,wCACfF,MAAO,CAAEkC,MAAO,MAAOC,OAAQ,UAC3B,yBAAKjC,UAAU,mBAG/B,OAAIb,KAAKmB,MAAMJ,MAEP,6BAAK,kBAAC,IAAD,MACD,yBAAKF,UAAU,+BAEX,kBAAC,IAAD,CAAYkC,KAAM/C,KAAKmB,MAAMG,cAIpCtB,KAAKmB,MAAME,KAEZ,iCAAM,kBAAC,IAAD,MACF,yBAAKR,UAAU,+BAEX,wBAAIA,UAAU,uBAAd,gBACA,4BACKO,KAMb,6BAAK,kBAAC,IAAD,MACD,yBAAKP,UAAU,+BAEf,yBAAKA,UAAU,wCACfF,MAAO,CAAEkC,MAAO,MAAOC,OAAQ,UAC3B,yBAAKjC,UAAU,iBAEf,kBAAC+B,EAAD,MACA,kBAACA,EAAD,MACA,kBAACA,EAAD,Y,GAzGa5B,IAAMC","file":"static/js/7.d5a130fa.chunk.js","sourcesContent":["import React from 'react';\nimport { genPromise } from '../plugins';\nimport ResultView from './result.jsx';\nimport Header from './header'\n\n\n\n/*\nexport class ProjectCard extends React.Component{\n    render(){\n        return(\n            <div className='card'>\n                <div className=\"card-body\">\n                    <span className=\"badge\">{this.props.tag}</span>\n                    <h5 className=\"card-title\">\n                        {this.props.title}\n                        \n                    </h5>\n                    <p className=\"card-text\">{this.props.abstract}</p>\n                    {this.props.link&&<a className='btn btn-self' href={this.props.link}>Link</a>}\n                </div>\n            </div>\n        )\n    }\n}\n*/\n\n/**\n * @description 单个项目展示\n * @author zhghxy\n * @date 2020-03-21\n * @class ProjectCard\n * @extends {React.Component}\n */\nclass ProjectCard extends React.Component {\n    render() {\n        try{\n            const title = this.props.title;\n            const mm = this.props.title.match(/[\\n\\r]+/);\n            const index = mm['index'];\n            const name_mm=title.slice(index).match(/([\\u4e00-\\u9fa5]+)/);\n            var name=name_mm[0],\n                en_title=title.slice(index+name_mm['index']+name.length);\n        \n            //console.log(title.slice(index).match(/([\\u4e00-\\u9fa5]+)/));\n        // console.log(en_title);\n        console.log(this.props.title);\n            return (\n                <li>\n                    <div >\n                        <p style={{marginBottom:0}}>\n                        <span className=\"badge badge-pill badge-secondary\">\n                            {title.slice(0, index)}</span>\n                            <span>{en_title}</span>\n                        \n                        </p>\n                        \n                        <p>\n                            {name}<span className='ml-1'>{this.props.time}</span>\n                        </p>\n                    </div>\n                </li>\n            )\n        }catch(error){\n            return(\n                <li>\n                    <div>\n                        {this.props.title}\n                    </div>\n                </li>\n            )\n        }\n    }\n}\n\n\n/**\n * @description 项目展示页面\n * @author zhghxy\n * @date 2020-03-21\n * @export\n * @class Project\n * @extends {React.Component}\n */\nexport default class Project extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            project_list: [],\n            load: false,\n            error: false,\n            error_msg: 'error'\n        }\n    }\n    componentDidMount(){\n        const time_test= /((\\d{4})年(\\d{1,2}月)?[-至](\\d{4})年(\\d{1,2}月)?)|((\\d{4})\\.\\d{1,2}\\.\\d{1,2}[-至](\\d{4})\\.\\d{1,2}\\.\\d{1,2})[\\n\\r]*$/;\n        genPromise('GET','http://39.100.113.162/info/project/project.php').then(\n            (data)=>{\n                if(data.code===0){\n                    data.data.forEach((el)=>{\n                        var project_time=el.project_name.match(time_test);\n                        el.time = project_time[2] || project_time[7] || new Date().getFullYear();\n                        el.project_name = el.project_name.slice(0, project_time['index']);\n                        el.project_time = project_time[0];\n                    })\n                    data.data.sort((a, b) => {\n                        if(!a.time)\n                            return 1;\n                        else if(!b.time)\n                            return -1;\n                        return b.time - a.time;\n                    })\n                    //console.log(data.data);\n                    this.setState({\n                        project_list: data.data,\n                        load: true\n                    })\n                } else {\n                    this.setState({\n                        error: true\n                    })\n                }\n            }, (error) => {\n                console.log(error);\n                this.setState({\n                    error: true,\n                    error_msg: error.message\n                })\n            }\n        )\n    }\n\n    render() {\n\n\n        const project_list = this.state.project_list.map((el, index) =>\n            <ProjectCard key={index}\n                title={el.project_name}\n                time={el.project_time}\n                abstract={el.abstract}\n                tag={el.tag}\n                link={el.link} />\n        );\n        const ContentLoader = () =>\n            (<div className='content-loader p-2'>\n                <div className='content-loader-rect rounded-pill  m-3'\n                    style={{ width: '85%', height: '.8rem' }}>\n                        <div className=\"animated-bg\"></div>\n                    </div>\n                    <div className='content-loader-rect rounded-pill  m-3'\n                    style={{ width: '60%', height: '.8rem' }}>\n                        <div className=\"animated-bg\"></div>\n                    </div>\n                    <div className='content-loader-rect rounded-pill  m-3'\n                    style={{ width: '60%', height: '.8rem' }}>\n                        <div className=\"animated-bg\"></div>\n                    </div>\n            </div>);\n        if (this.state.error) {\n            return (\n                <div><Header />\n                    <div className='container project-container'>\n\n                        <ResultView text={this.state.error_msg} />\n                    </div></div>\n            )\n        }\n        else if (this.state.load) {\n            return (\n                <div> <Header />\n                    <div className='container project-container'>\n\n                        <h4 className='title border-bottom'>项目</h4>\n                        <ul>\n                            {project_list}\n                        </ul>\n                    </div></div>\n            );\n        } else {\n            return (\n                <div><Header />\n                    <div className='container project-container'>\n\n                    <div className='content-loader-rect rounded-pill  m-3'\n                    style={{ width: '25%', height: '.8rem' }}>\n                        <div className=\"animated-bg\"></div>\n                    </div>\n                        <ContentLoader />\n                        <ContentLoader />\n                        <ContentLoader />\n                    </div></div>\n\n            )\n        }\n\n    }\n}"],"sourceRoot":""}